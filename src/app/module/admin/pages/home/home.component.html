<section class="p-6">
  <div class="flex items-center justify-between mb-6">
    <p class="text-xl font-semibold text-gray-800">Purchase Order Management</p>
    <button
      type="button"
      class="text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 inline-flex items-center gap-2 transition-colors"
      (click)="openAddPo()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="w-4 h-4"
      >
        <rect x="3" y="5" width="18" height="14" rx="2" stroke-width="1.5" />
        <path stroke-width="1.5" d="M7 9h10M7 13h6" />
      </svg>
      New PO
    </button>
  </div>

  <mat-tab-group (selectedTabChange)="onTabChange($event.index)">
    <mat-tab label="INCOMING">
      <div
        class="overflow-x-auto shadow-sm rounded-lg border border-gray-200 mt-4 bg-white"
      >
        <div *ngIf="!isLoading">
          <table
            mat-table
            class="w-full text-sm text-left text-gray-500"
            [dataSource]="sortedData"
            (matSortChange)="sortData($event)"
            matSort
            #empTbSort="matSort"
          >
            <ng-container matColumnDef="poNumber">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="poNumber"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                #PO
              </th>
              <td
                mat-cell
                *matCellDef="let element"
                class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap"
              >
                {{ element.poNumber }}
              </td>
            </ng-container>

            <ng-container matColumnDef="customerName">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="customerName"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Customer Name
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.buyerOrgName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="supplier">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="supplier"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Supplier
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.supplier }}
              </td>
            </ng-container>

            <ng-container matColumnDef="destination">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="destination"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Destination
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.destination }}
              </td>
            </ng-container>

            <ng-container matColumnDef="orderDate">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="orderDate"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Order Date
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.orderDate | date }}
              </td>
            </ng-container>

            <ng-container matColumnDef="deliverySchedule">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="deliverySchedule"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Delivery Due
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.deliverySchedule | date }}
              </td>
            </ng-container>

            <ng-container matColumnDef="paymentTerms">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="paymentTerms"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Payment Terms
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.paymentTerms }}
              </td>
            </ng-container>

            <ng-container matColumnDef="deliveryTerms">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="deliveryTerms"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Delivery Terms
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.deliveryTerms }}
              </td>
            </ng-container>

            <ng-container matColumnDef="modeOfShipment">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="modeOfShipment"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Mode of Shipment
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.modeOfShipment }}
              </td>
            </ng-container>

            <ng-container matColumnDef="shippingCharges">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="shippingCharges"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Shipping Charges
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.shippingCharges | currency: "USD" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="discount">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="discount"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Discount (%)
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.discount }}%
              </td>
            </ng-container>

            <ng-container matColumnDef="totalCost">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="totalCost"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Total Cost
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.totalCost | currency: "USD" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="totalAmount">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="totalAmount"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Total Amount
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.totalAmount | currency: "USD" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="poStatus">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="poStatus"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Status
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                <span
                  class="px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"
                  [ngClass]="{
                    'bg-blue-100 text-blue-800': element.poStatus === 'Created',
                    'bg-green-100 text-green-800':
                      element.poStatus === 'Approved',
                    'bg-yellow-100 text-yellow-800':
                      element.poStatus === 'Processing',
                    'bg-indigo-100 text-indigo-800':
                      element.poStatus === 'Completed',
                    'bg-sky-100 text-sky-800': element.poStatus === 'Sent',
                    'bg-lime-100 text-lime-800':
                      element.poStatus === 'Supplier Confirmed',
                    'bg-purple-100 text-purple-800':
                      element.poStatus === 'Received',
                    'bg-teal-100 text-teal-800':
                      element.poStatus === 'Invoiced',
                    'bg-gray-100 text-gray-800': element.poStatus === 'Closed',
                  }"
                >
                  {{ element.poStatus }}
                </span>
              </td>
            </ng-container>

            <ng-container matColumnDef="createdBy">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="createdBy"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Created By
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.createdBy }}
              </td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th
                mat-header-cell
                *matHeaderCellDef
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Actions
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                <button
                  (click)="$event.stopPropagation()"
                  type="button"
                  class="bg-transparent"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    class="w-6 h-6 fill-red-400 hover:fill-red-600"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="activeDisplayedColumns"></tr>

            <tr
              mat-row
              *matRowDef="let element; columns: activeDisplayedColumns"
              (click)="openPOModel(element)"
              class="example-element-row cursor-pointer bg-white border-b hover:bg-gray-50"
            ></tr>
          </table>
        </div>

        <div class="mt-10" *ngIf="!isLoading && sortedData.data.length === 0">
          <p class="text-center py-8 text-gray-500 text-sm">
            No data to display
          </p>
        </div>
        <div class="mt-10" *ngIf="isLoading">
          <p class="text-center py-8 text-gray-500 text-sm">
            <span>Loading Data</span>
            <span class="loading-dots">
              <span class="dot">.</span>
              <span class="dot">.</span>
              <span class="dot">.</span>
            </span>
          </p>
        </div>
      </div>
    </mat-tab>

    <mat-tab label="OUTGOING">
      <div
        class="overflow-x-auto shadow-sm rounded-lg border border-gray-200 mt-4 bg-white"
      >
        <div *ngIf="!isLoading">
          <table
            mat-table
            class="w-full text-sm text-left text-gray-500"
            [dataSource]="sortedData"
            (matSortChange)="sortData($event)"
            matSort
            #empTbSort="matSort"
          >
            <ng-container matColumnDef="poNumber">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="poNumber"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                #PO
              </th>
              <td
                mat-cell
                *matCellDef="let element"
                class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap"
              >
                {{ element.poNumber }}
              </td>
            </ng-container>

            <ng-container matColumnDef="customerName">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="customerName"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Customer Name
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.buyerOrgName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="supplier">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="supplier"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Supplier
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.supplier }}
              </td>
            </ng-container>

            <ng-container matColumnDef="destination">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="destination"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Destination
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.destination }}
              </td>
            </ng-container>

            <ng-container matColumnDef="orderDate">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="orderDate"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Order Date
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.orderDate | date }}
              </td>
            </ng-container>

            <ng-container matColumnDef="deliverySchedule">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="deliverySchedule"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Delivery Due
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.deliverySchedule | date }}
              </td>
            </ng-container>

            <ng-container matColumnDef="paymentTerms">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="paymentTerms"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Payment Terms
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.paymentTerms }}
              </td>
            </ng-container>

            <ng-container matColumnDef="deliveryTerms">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="deliveryTerms"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Delivery Terms
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.deliveryTerms }}
              </td>
            </ng-container>

            <ng-container matColumnDef="modeOfShipment">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="modeOfShipment"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Mode of Shipment
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.modeOfShipment }}
              </td>
            </ng-container>

            <ng-container matColumnDef="shippingCharges">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="shippingCharges"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Shipping Charges
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.shippingCharges | currency: "USD" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="discount">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="discount"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Discount (%)
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.discount }}%
              </td>
            </ng-container>

            <ng-container matColumnDef="totalCost">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="totalCost"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Total Cost
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.totalCost | currency: "USD" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="totalAmount">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="totalAmount"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Total Amount
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.totalAmount | currency: "USD" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="description">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="description"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Description
              </th>
              <td
                mat-cell
                *matCellDef="let element"
                class="px-4 py-3 max-w-xs truncate"
              >
                {{ element.description }}
              </td>
            </ng-container>

            <ng-container matColumnDef="poStatus">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="poStatus"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Status
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                <span
                  class="px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"
                  [ngClass]="{
                    'bg-blue-100 text-blue-800': element.poStatus === 'Created',
                    'bg-green-100 text-green-800':
                      element.poStatus === 'Approved',
                    'bg-yellow-100 text-yellow-800':
                      element.poStatus === 'Processing',
                    'bg-indigo-100 text-indigo-800':
                      element.poStatus === 'Completed',
                    'bg-sky-100 text-sky-800': element.poStatus === 'Sent',
                    'bg-lime-100 text-lime-800':
                      element.poStatus === 'Supplier Confirmed',
                    'bg-purple-100 text-purple-800':
                      element.poStatus === 'Received',
                    'bg-teal-100 text-teal-800':
                      element.poStatus === 'Invoiced',
                    'bg-gray-100 text-gray-800': element.poStatus === 'Closed',
                  }"
                >
                  {{ element.poStatus }}
                </span>
              </td>
            </ng-container>

            <ng-container matColumnDef="createdBy">
              <th
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header="createdBy"
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Created By
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                {{ element.createdBy }}
              </td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th
                mat-header-cell
                *matHeaderCellDef
                class="px-4 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50"
              >
                Actions
              </th>
              <td mat-cell *matCellDef="let element" class="px-4 py-3">
                <button
                  (click)="$event.stopPropagation()"
                  type="button"
                  class="bg-transparent"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    class="w-6 h-6 fill-red-400 hover:fill-red-600"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="activeDisplayedColumns"></tr>

            <tr
              mat-row
              *matRowDef="let element; columns: activeDisplayedColumns"
              class="example-element-row cursor-pointer bg-white border-b hover:bg-gray-50"
              (click)="openPOModel(element)"
            ></tr>
          </table>
        </div>

        <div class="mt-10" *ngIf="!isLoading && sortedData.data.length === 0">
          <p class="text-center py-8 text-gray-500 text-sm">
            No data to display
          </p>
        </div>
        <div class="mt-10" *ngIf="isLoading">
          <p class="text-center py-8 text-gray-500 text-sm">
            <span>Loading Date </span>
            <span class="loading-dots">
              <span class="dot">.</span>
              <span class="dot">.</span>
              <span class="dot">.</span>
            </span>
          </p>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</section>
<mat-paginator
  class=""
  #paginator
  [length]="sortedData.data.length"
  [pageSize]="10"
  [pageSizeOptions]="[10, 50, 80, 100]"
></mat-paginator>
<app-po-model
  *ngIf="showModel"
  [po]="po"
  (onClick)="closePoModel($event)"
></app-po-model>
<app-add-po
  *ngIf="showAddPo"
  [customers]="customers"
  (onClick)="closeAddPo()"
></app-add-po>
